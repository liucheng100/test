import{_,E as r,aK as g,aL as m,A as h,z as f,o as w,c as v,d as o,a,aM as k,w as N,f as L,C as V,p as y,i as A,aN as C}from"./index.b6fd4dc1.js";import{E}from"./el-button.e6527c0e.js";import{E as B}from"./el-input.62d293a6.js";/* empty css                   */import{a as I}from"./login.9e231921.js";import"./index.dcc0ffaa.js";const O={data(){return{ON:!1,account:"",password:"",loginLoading:!1}},methods:{toLogin(s){if(!this.account){r.warning("\u8BF7\u8F93\u5165\u60A8\u7684\u8D26\u53F7");return}if(!this.password){r.warning("\u8BF7\u8F93\u5165\u60A8\u7684\u5BC6\u7801");return}if(!this.ON){r.warning("\u8BF7\u9605\u8BFB\u5E76\u540C\u610F\u9690\u79C1\u653F\u7B56");return}this.loginLoading=!0,I({username:this.account,password:this.password}).then(({data:e,...d})=>{e.code===0?(r.success("\u767B\u5F55\u6210\u529F"),g(e.data.userId),m(e.data.isAdmin),h(d.headers.token),this.loginLoading=!1,this.$router.push(this.$route.query.from||"/")):(r.error(e.description+": "+e.msg),this.password="",this.loginLoading=!1)}).catch(()=>{r.error("\u767B\u5F55\u5931\u8D25"),this.loginLoading=!1})},checkEmail(){return!/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(this.account)&&this.account?(r.info("\u8BF7\u8F93\u5165\u6B63\u786E\u7684\u90AE\u7BB1\u683C\u5F0F"),!1):!0}},created(){f()&&this.$router.push(this.$route.query.from||"/")}},l=s=>(y("data-v-3082ed52"),s=s(),A(),s),$={class:"login"},z=l(()=>o("p",{class:"title"},"\u767B\u5F55\u65B9\u5BF8 \xB7 \u6D41\u5E74",-1)),K={class:"content"},P=l(()=>o("p",{class:"tag"},"\u65B9\u5BF8 \xB7 \u6D41\u5E74\u8D26\u53F7",-1)),b=l(()=>o("p",{class:"tag"},"\u5BC6\u7801",-1)),x={class:"other-bar"},S=C("\u767B\u5F55"),T={class:"other-bar"};function U(s,e,d,Z,t,i){const c=B,u=V,p=E;return w(),v("div",$,[z,o("div",K,[o("form",null,[P,a(c,{modelValue:t.account,"onUpdate:modelValue":e[0]||(e[0]=n=>t.account=n),onBlur:i.checkEmail,placeholder:"\u8BF7\u8F93\u5165\u90AE\u7BB1...",class:"input"},null,8,["modelValue","onBlur"]),b,a(c,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=n=>t.password=n),type:"password","show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801...",class:"input",onKeypress:k(i.toLogin,["enter"])},null,8,["modelValue","onKeypress"])]),o("div",x,[a(u,{class:"proto",onCheck:e[2]||(e[2]=n=>t.ON=!t.ON),ON:t.ON},null,8,["ON"]),o("div",{onClick:e[3]||(e[3]=n=>s.$router.replace("resetPwd")),class:"forget"},"\u5FD8\u8BB0\u5BC6\u7801")]),a(p,{"auto-insert-space":"",class:"loginBtn redBtn",onClick:i.toLogin,loading:t.loginLoading},{default:N(()=>[S]),_:1},8,["onClick","loading"]),L("",!0),o("div",T,[o("div",{onClick:e[5]||(e[5]=n=>s.$router.replace("login")),class:"other-way"}," \u5929\u5916\u5929\u8D26\u53F7\u767B\u9646 "),o("div",{onClick:e[6]||(e[6]=n=>s.$router.replace("signup")),class:"forget"},"\u6CE8\u518C\u65B9\u5BF8 \xB7 \u6D41\u5E74")])])])}var H=_(O,[["render",U],["__scopeId","data-v-3082ed52"]]);export{H as default};
