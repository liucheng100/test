import{_,E as n,aK as g,aL as m,A as h,z as f,o as w,c as v,d as e,a,aM as N,w as L,f as V,C as k,p as y,i as C,aN as E}from"./index.b6fd4dc1.js";import{E as I}from"./el-button.e6527c0e.js";import{E as O}from"./el-input.62d293a6.js";/* empty css                   */import{l as B}from"./login.9e231921.js";import"./index.dcc0ffaa.js";const x={data(){return{ON:!1,account:"",password:"",loginLoading:!1}},methods:{toLogin(t){if(!this.account){n.warning("\u8BF7\u8F93\u5165\u60A8\u7684\u7528\u6237\u540D");return}if(!this.password){n.warning("\u8BF7\u8F93\u5165\u60A8\u7684\u5BC6\u7801");return}if(!this.ON){n.warning("\u8BF7\u9605\u8BFB\u5E76\u540C\u610F\u9690\u79C1\u653F\u7B56");return}this.loginLoading=!0,B({username:this.account,password:this.password}).then(({data:o,...l})=>{o.code===0?(n.success("\u767B\u5F55\u6210\u529F"),g(o.data.userId),m(o.data.isAdmin),h(l.headers.token),this.loginLoading=!1,this.$router.push(this.$route.query.from||"/")):(n.error(o.description+": "+o.msg),this.password="",this.loginLoading=!1)}).catch(()=>{n.error("\u767B\u5F55\u5931\u8D25"),this.loginLoading=!1})}},created(){f()&&this.$router.push(this.$route.query.from||"/")}},i=t=>(y("data-v-33553a19"),t=t(),C(),t),A={class:"login"},K=i(()=>e("p",{class:"title"},"\u767B\u5F55\u65B9\u5BF8 \xB7 \u6D41\u5E74",-1)),S={class:"content"},T=i(()=>e("p",{class:"tag"},"\u5929\u5916\u5929\u8D26\u6237\u540D",-1)),U=i(()=>e("p",{class:"tag"},"\u5BC6\u7801",-1)),b=E("\u767B\u5F55"),q={class:"other-bar"},M=i(()=>e("div",{class:"forget"},"\u5FD8\u8BB0\u5BC6\u7801",-1));function $(t,o,l,z,s,d){const c=O,p=k,u=I;return w(),v("div",A,[K,e("div",S,[e("form",null,[T,a(c,{modelValue:s.account,"onUpdate:modelValue":o[0]||(o[0]=r=>s.account=r),placeholder:"\u5B66\u53F7/\u6635\u79F0/\u624B\u673A\u53F7...",class:"input"},null,8,["modelValue"]),U,a(c,{modelValue:s.password,"onUpdate:modelValue":o[1]||(o[1]=r=>s.password=r),type:"password","show-password":"",placeholder:"\u8BF7\u8F93\u5165\u5BC6\u7801...",class:"input",onKeypress:N(d.toLogin,["enter"])},null,8,["modelValue","onKeypress"])]),a(p,{class:"proto",onCheck:o[2]||(o[2]=r=>s.ON=!s.ON),ON:s.ON},null,8,["ON"]),a(u,{"auto-insert-space":"",class:"loginBtn redBtn",onClick:d.toLogin,loading:s.loginLoading},{default:L(()=>[b]),_:1},8,["onClick","loading"]),V("",!0),e("div",q,[e("div",{onClick:o[4]||(o[4]=r=>t.$router.replace("loginA")),class:"other-way"}," \u6CA1\u6709\u5929\u5916\u5929\u8D26\u53F7\uFF1F "),M])])])}var J=_(x,[["render",$],["__scopeId","data-v-33553a19"]]);export{J as default};
