import{_ as u,m as h,E as g,o as n,c as r,d as i,F as _,e as f,n as b,t as p}from"./index.b6fd4dc1.js";/* empty css                   */import{g as T}from"./file.abfe09ac.js";import{a as d,c as y}from"./contest.14823739.js";import"./index.dcc0ffaa.js";const S={name:"preCamps",props:{},inject:["globalData"],data(){return{comps:[{title:"\u5149\xB7\u8FF9",subtitle:"\u7B2C\u5341\u4E09\u5C4A\u65B9\u5BF8\xB7\u6D41\u5E74\u6444\u5F71\u5927\u8D5B\u7B2C\u5341\u4E09\u5C4A\u65B9\u5BF8\xB7\u6D41\u5E74\u6444\u5F71\u5927\u8D5B",status:1,bannerPic:"../assets/admin/testpic.jpg",stopTime:"2023-08-24T14:15:22",startTime:"2023-07-24T14:15:22"},{title:"\u5149\xB7\u8FF9",subtitle:"\u7B2C\u5341\u4E09\u5C4A\u65B9\u5BF8\xB7\u6D41\u5E74\u6444\u5F71\u5927\u8D5B",status:2,bannerPic:"../assets/admin/testpic.jpg",stopTime:"2023-05-24T14:15:22",startTime:"2023-03-24T14:15:22"},{title:"\u5149\xB7\u8FF9",subtitle:"\u7B2C\u5341\u4E09\u5C4A\u65B9\u5BF8\xB7\u6D41\u5E74\u6444\u5F71\u5927\u8D5B",status:3,bannerPic:"../assets/admin/testpic.jpg",stopTime:"2021-08-24T14:15:22",startTime:"2021-07-24T14:15:22"},{title:"\u5149\xB7\u8FF9",subtitle:"\u7B2C\u5341\u4E09\u5C4A\u65B9\u5BF8\xB7\u6D41\u5E74\u6444\u5F71\u5927\u8D5B",status:4,bannerPic:"../assets/admin/testpic.jpg",stopTime:"2019-08-24T14:15:22",startTime:"2019-07-24T14:15:22"}],pageNum:1,pageSize:6,byEnd:!1,loading:!1}},watch:{byEnd(t){t&&(this.loading||(this.loading=!0,d({pageNum:this.pageNum,pageSize:this.pageSize}).then(s=>{console.log(s),s.code||(this.comps=this.comps.concat(s.data),s.data.forEach(e=>{this.replaceBlob(e,["bannerPic"])}),this.pageNum++),this.loading=!1})))}},methods:{clickFn(t){t.contestId==this.globalData.contestId?this.$router.push("/submit"):this.$router.push({path:"/homepage",query:{contestId:t.contestId}})},replaceBlob(t,s){console.log(s),s.forEach(e=>{T(t[e]).then(o=>{t[e]=o,this.$forceUpdate()}),t[e]=h("loading.gif")})},scroll(t){let s=t.target.scrollTop,e=t.target.offsetHeight,a=t.target.scrollHeight-e-s;console.log(a),a<140?this.byEnd=!0:this.byEnd=!1},newCompetition(){this.$router.push("/admin/new-competition")},setQues(){this.$router.push("/admin/questionnaire")},status(t){if(this.comps[t].status===1){let s=this.comps[t].startTime,e=new Date(s),o=new Date,a=parseInt((e-o)/864e5);return"\u8FD8\u6709"+a+"\u5929\u5F00\u59CB \xB7 \u672A\u5F00\u59CB"}else if(this.comps[t].status===2){let s=this.comps[t].stopTime,e=new Date(s),o=new Date,a=parseInt((e-o)/864e5);return"\u8FD8\u6709"+a+"\u5929\u622A\u6B62 \xB7 \u5F81\u7A3F\u4E2D"}else{if(this.comps[t].status===3)return"\u8BC4\u5BA1\u4E2D";if(this.comps[t].status===4)return"\u5DF2\u7ED3\u675F"}}},mounted(){this.loading=!0,d({pageNum:this.pageNum,pageSize:this.pageSize}).then(t=>{console.log(t),t.code||(this.comps=t.data,t.data.forEach(s=>{this.replaceBlob(s,["bannerPic"])}),this.pageNum++),this.loading=!1}),y().then(t=>{t.code?g.error(t.msg):this.globalData.contestId=t.data.contestId})}},E={class:"comps"},I=["onClick"],P={class:"compBottom"},v={class:"campTitles"},B={class:"campTitle"},C={class:"titleBottom"},D={class:"campSubTitle"},N={class:"campStatus"};function k(t,s,e,o,a,c){return n(),r("div",{class:"preCamps",onScroll:s[0]||(s[0]=(...l)=>c.scroll&&c.scroll(...l))},[i("div",E,[(n(!0),r(_,null,f(a.comps,(l,m)=>(n(),r("div",{onClick:w=>c.clickFn(l),class:"compCard"},[i("div",{class:"compPic",style:b({backgroundImage:`url('${l.bannerPic}')`})},null,4),i("div",P,[i("div",v,[i("div",B,p(l.title),1),i("div",C,[i("div",D,p(l.subtitle),1),i("div",N,p(c.status(m)),1)])])])],8,I))),256))])],32)}var q=u(S,[["render",k],["__scopeId","data-v-0f225f05"]]);export{q as default};
