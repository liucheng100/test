import{_ as I,E as l,m as k,o as h,c as _,d as o,t as p,a as r,w as d,l as v,q as D,s as S,u as C,b as N,v as T}from"./index.b6fd4dc1.js";import{_ as u,a as b,b as f}from"./Page1.6dd28547.js";/* empty css                   */import{g as q}from"./file.abfe09ac.js";import{c as g,g as O}from"./contest.14823739.js";import{i as w}from"./common.eb3c7a8c.js";import"./work.7d305944.js";import"./index.dcc0ffaa.js";const M={name:"homepage",components:[u,b,f],inject:["globalData"],data(){return{testList:[],ON:!1,seasonState:0,byEnd:!1,catchTop:0,catchId:-1,isSafari:!0,contest:{}}},computed:{restday(){let s=this.contest.stopTime,t=new Date(s),i=new Date,c=t-i,e=1e3*60*60*24;return Math.ceil(c/e)}},methods:{click1(){this.ON=!this.ON},click2(){console.log(9)},scroll(s){let t=s.target.scrollTop;this.catchTop=t;let i=s.target.offsetHeight;s.target.scrollHeight-i-t<140?this.byEnd=!0:this.byEnd=!1},replaceBlob(s,t){t.forEach(i=>{q(s[i]).then(c=>{s[i]=c}).catch(c=>{l.error("\u56FE\u7247\u52A0\u8F7D\u5931\u8D25")}),s[i]=k("loading.gif")})}},mounted(){this.isSafari=w(),!this.$route.query.contestId&&g().then(s=>{s.code?l.error(s.msg):(this.contest=s.data,this.replaceBlob(this.contest,["bannerPic","introductionPic","tailPic"]),this.contest.prizes[1].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.contest.prizes[2].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.contest.prizes[3].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.contest.prizes[4].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.globalData.contestId=this.contest.contestId,this.globalData.prizes=this.contest.prizes)})},activated(){this.$refs.homepage.scrollTop=this.catchTop,this.$route.query.contestId?(this.catchId==this.$route.query.contestId||O(this.$route.query.contestId).then(s=>{s.code?l.error(s.description):(this.contest=s.data,console.log(this.contest),this.replaceBlob(this.contest,["bannerPic","introductionPic","tailPic"]),this.contest.prizes[1].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.contest.prizes[2].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.contest.prizes[3].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.contest.prizes[4].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.globalData.contestId=this.contest.contestId,this.globalData.prizes=this.contest.prizes)}),this.catchId=this.$route.query.contestId):this.catchId!=-1&&(this.catchId=-1,g().then(s=>{s.code?l.error(s.msg):(this.contest=s.data,this.replaceBlob(this.contest,["bannerPic","introductionPic","tailPic"]),this.contest.prizes[1].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.contest.prizes[2].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.contest.prizes[3].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.contest.prizes[4].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.globalData.contestId=this.contest.contestId,this.globalData.prizes=this.contest.prizes)}))},beforeRouteUpdate(s,t,i){g().then(c=>{c.code?l.error(c.msg):(this.contest=c.data,this.replaceBlob(this.contest,["bannerPic","introductionPic","tailPic"]),this.contest.prizes[1].forEach(e=>{this.replaceBlob(e,["goodPic"])}),this.contest.prizes[2].forEach(e=>{this.replaceBlob(e,["goodPic"])}),this.contest.prizes[3].forEach(e=>{this.replaceBlob(e,["goodPic"])}),this.contest.prizes[4].forEach(e=>{this.replaceBlob(e,["goodPic"])}),this.globalData.contestId=this.contest.contestId,this.globalData.prizes=this.contest.prizes)}),i()}},x={class:"banner"},L=["src"],H={class:"banner-tip"},V={class:"info"},G={class:"info-left"},R={class:"info-title"},U={class:"info-tip"},A={class:"tab-0"},F={class:"tab-1"},J={class:"tab-2"},K={key:1,class:"default-img",src:T,alt:""};function Q(s,t,i,c,e,a){const m=D,P=u,B=b,z=f,E=S,y=C;return h(),_("div",{id:"homepage",ref:"homepage",class:"homepage",onScroll:t[6]||(t[6]=(...n)=>a.scroll&&a.scroll(...n))},[o("div",x,[o("img",{class:"banner-img",src:e.contest.bannerPic,alt:""},null,8,L),o("div",H,"\u8FD8\u6709"+p(a.restday)+"\u5929\u622A\u7A3F",1)]),o("div",V,[o("div",G,[o("div",R,p(e.contest.title),1),o("div",U,p(e.contest.subtitle),1)]),r(m,{onClick:t[0]||(t[0]=n=>e.contest.status==2?e.ON=!0:0),state:e.contest.status-1||0},null,8,["state"])]),r(E,{id:11451,sticky:"0",title_list:["\u8D5B\u4E8B\u4ECB\u7ECD","\u5168\u90E8\u4F5C\u54C1","\u83B7\u5956\u4F5C\u54C1"],onTab0Click:t[1]||(t[1]=n=>e.seasonState=0),onTab1Click:t[2]||(t[2]=n=>e.seasonState=1),onTab2Click:t[3]||(t[3]=n=>e.seasonState=2)},{tab0:d(()=>[o("div",A,[r(P,{contest:e.contest},null,8,["contest"])])]),tab1:d(()=>[o("div",F,[r(B,{loadMore:e.byEnd},null,8,["loadMore"])])]),tab2:d(()=>[o("div",J,[e.contest.status==4?(h(),N(z,{key:0})):(h(),_("img",K))])]),_:1}),r(y,{ON:e.ON,model:0,title:"\u6211\u4EEC\u66F4\u63A8\u8350\u5728PC\u7AEF\u6295\u7A3F\u4F5C\u54C1",tip:"\u4EE5\u907F\u514D\u5728\u624B\u673A\u4E0A\u627E\u4E0D\u5230\u6587\u4EF6\u3002",options:{black:"",grey:"\u575A\u6301\u6295\u7A3F",blue:"\u597D\u7684"},onBlackClick:n=>0,onGreyClick:t[4]||(t[4]=n=>{s.$router.push({path:"/submit",query:{contestId:a.globalData.contestId}}),e.ON=!1}),onBlueClick:t[5]||(t[5]=n=>e.ON=!1)},null,8,["ON"]),o("div",{class:v(e.isSafari?"footer":"")},null,2)],544)}var st=I(M,[["render",Q],["__scopeId","data-v-68b1348c"]]);export{st as default};
