import{_ as C,m as g,E as n,ap as h,o as a,c,d as s,t as p,n as v,F as N,e as T,a as d,b as P,w,g as b,h as B,u as z,f as k,ae as W,af as x,p as F,i as E}from"./index.b6fd4dc1.js";import{E as S}from"./el-input.62d293a6.js";/* empty css                   */import"./index.dcc0ffaa.js";import{u as R,g as y}from"./login.9e231921.js";import{r as V,b as G}from"./work.7d305944.js";import{c as q}from"./contest.14823739.js";import{g as D}from"./file.abfe09ac.js";const O={name:"myWork",props:{},data(){return{works:[{title:"\u6211\u7684\u4F5C\u54C1",isPass:0,prizeId:0,Pic:"../../assets/admin/testpic.jpg",Time:"2023-08-24T14:15:22",view:2123},{title:"\u6211\u7684\u4F5C\u54C1",isPass:1,prizeId:0,Pic:"../../assets/admin/testpic.jpg",Time:"2023-05-24T14:15:22",view:2123},{title:"\u6211\u7684\u4F5C\u54C1",isPass:2,prizeId:0,Pic:"../../assets/admin/testpic.jpg",Time:"2021-08-24T14:15:22",view:2123},{title:"\u6211\u7684\u4F5C\u54C1",isPass:2,prizeId:1,Pic:"../../assets/admin/testpic.jpg",Time:"2019-08-24T14:15:22",view:2123}],contest:{},info:{},waitingForRemove:-1,pop1:!1,pop2:!1,pop3:!1,pop4:!1,newNickname:""}},computed:{popIcon(){return g("warnCircle.svg")}},methods:{changeName(){if(!this.newNickname){n.info("\u4E0D\u80FD\u4E3A\u7A7A");return}R({userId:this.info.userId,avatar:this.info.avatar,nickname:this.newNickname}).then(e=>{console.log(e),e.code||(n.success("\u4FEE\u6539\u6210\u529F"),this.pop4=!1,y(h()).then(o=>{o.code||(this.info=o.data)}).catch(o=>{n.error("\u51FA\u9519\u4E86")}))})},deleteWork(e){this.waitingForRemove=e,this.pop1=!0},removeWork(){V(this.waitingForRemove).then(e=>{console.log(e),e.code?(n.success("\u5220\u9664\u5931\u8D25"),this.pop3=!0):(n.success("\u5220\u9664\u6210\u529F"),this.pop2=!0)}).catch(e=>{n.success("\u5220\u9664\u5931\u8D25"),this.pop3=!0}),this.pop1=!1},newCompetition(){this.$router.push("/admin/new-competition")},setQues(){this.$router.push("/admin/questionnaire")},time(e){let o=this.works[e].Time,l=new Date(o);return l.getFullYear()+"/"+(l.getMonth()+1)+"/"+l.getDate()},groupType(e){return e==1?"\u5355\u53CD\u7EC4":e==2?"\u968F\u624B\u62CD":e==3?"\u77ED\u89C6\u9891":"AI\u7EC4"},pass(e){if(this.works[e].isPass==0)return"\u672A\u5BA1\u6838";if(this.works[e].isPass==1)return"\u5DF2\u901A\u8FC7";if(this.works[e].isPass==2)return"\u672A\u901A\u8FC7"},prize(e){},replaceBlob(e,o){o.forEach(l=>{D(e[l]).then(m=>{e[l]=m,this.$forceUpdate()}).catch(m=>{n.error("\u56FE\u7247\u52A0\u8F7D\u5931\u8D25")}),e[l]=g("loading.gif")})},beReward(){let e=this.contest.questionnaire;window.open(e,"_blank")}},mounted(){q().then(e=>{e.code?n.error(e.msg):(this.contest=e.data,console.log(this.contest))}),G(h()).then(e=>{console.log(e),e.code||(this.works=e.data,this.works.forEach(o=>{this.replaceBlob(o,["coverFile"])}))}).catch(e=>{n.error("\u8BF7\u5237\u65B0")}),y(h()).then(e=>{console.log(e),e.code||(this.info=e.data)}).catch(e=>{n.error("\u51FA\u9519\u4E86")})}},u=e=>(F("data-v-00c8ec88"),e=e(),E(),e),U={class:"myWork"},j={class:"top"},L=u(()=>s("div",{class:"title-main"},"\u6211\u7684\u6295\u7A3F",-1)),M={class:"auth"},A={class:"cards"},Q={class:"card-work"},Y={class:"bot"},H={class:"title"},J={class:"bar"},K={class:"time"},X={class:"flex"},Z=u(()=>s("div",{class:"eye"},null,-1)),$={class:"info"},ee={key:0,class:"bar"},se={class:"status"},oe={class:"flex"},te=u(()=>s("div",{class:"del"},null,-1)),ie=["onClick"],ne={key:1,class:"bar"},re={class:"status_prized"},le={class:"pop"},ae={key:0,class:"box"},ce=u(()=>s("div",{class:"title-pop"}," \u4FEE\u6539\u6635\u79F0 ",-1)),pe=u(()=>s("div",{class:"tip"}," \u8BF7\u9075\u5B88\u76F8\u5173\u6CD5\u5F8B\u6CD5\u89C4\u3002 ",-1)),de={class:"input-bar"},ue={class:"btn-bar"};function me(e,o,l,m,i,r){const _=z,I=S;return a(),c("div",U,[s("div",j,[L,s("div",{onClick:o[0]||(o[0]=t=>i.pop4=!0),class:"flex"},[s("div",M,p(i.info.nickname||"\u70B9\u51FB\u53EF\u8BBE\u7F6E\u6635\u79F0"),1),s("div",{class:"avatar",style:v({backgroundImage:`url('${i.info.avatar}')`})},null,4)])]),s("div",A,[(a(!0),c(N,null,T(i.works,(t,_e)=>(a(),c("div",Q,[s("div",{class:"cover",style:v({backgroundImage:`url('${t.coverFile}')`})},null,4),s("div",Y,[s("div",H,p(t.workTitle),1),s("div",J,[s("div",K,p(r.groupType(t.contestGroup)),1),s("div",X,[Z,s("div",$,p(t.views),1)])]),t.prizeId?k("",!0):(a(),c("div",ee,[s("div",se,p(r.pass(t.isPass)),1),s("div",oe,[te,s("div",{onClick:f=>r.deleteWork(t.workId),class:"info"},"\u5220\u9664",8,ie)])])),t.prizeId?(a(),c("div",ne,[s("div",re,p(t.prizeName),1),s("div",{class:"ques",onClick:o[1]||(o[1]=(...f)=>r.beReward&&r.beReward(...f))},"\u586B\u5199\u6536\u8D27\u4FE1\u606F")])):k("",!0)])]))),256))]),d(_,{ON:i.pop1,model:0,title:"\u786E\u8BA4\u8981\u5220\u9664\u5417",tip:"\u6B64\u64CD\u4F5C\u65E0\u6CD5\u88AB\u64A4\u9500\u3002",options:{black:"",grey:"\u5220\u9664",blue:"\u53D6\u6D88"},onBlackClick:t=>0,onBlueClick:o[2]||(o[2]=t=>i.pop1=!1),onGreyClick:r.removeWork},null,8,["ON","onGreyClick"]),d(_,{ON:i.pop2,model:1,title:"\u7A3F\u4EF6\u5DF2\u5220\u9664",tip:"\u8BF7\u5237\u65B0\u7F51\u9875",options:{black:"",grey:"",blue:"\u5B8C\u6210"},onBlackClick:t=>0,onBlueClick:o[3]||(o[3]=t=>{i.pop2=!1,e.$router.go(0)}),onGreyClick:t=>0},null,8,["ON"]),d(_,{ON:i.pop3,model:2,title:"\u5220\u9664\u4E0D\u6210\u529F",tip:"\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u8054\u7CFB\u7BA1\u7406\u5458",options:{black:"",grey:"",blue:"\u8FD4\u56DE"},onBlackClick:t=>0,onBlueClick:o[4]||(o[4]=t=>i.pop3=!1),onGreyClick:t=>0},null,8,["ON"]),(a(),P(B,{to:"body"},[d(b,{name:"fade"},{default:w(()=>[W(s("div",le,[d(b,{name:"pop"},{default:w(()=>[i.pop4?(a(),c("div",ae,[s("div",{class:"icon",style:v({backgroundImage:`url('${r.popIcon}')`})},null,4),ce,pe,s("div",de,[d(I,{modelValue:i.newNickname,"onUpdate:modelValue":o[5]||(o[5]=t=>i.newNickname=t),placeholder:"\u8F93\u5165\u6635\u79F0...",class:"art-name-input"},null,8,["modelValue"])]),s("div",ue,[s("div",{onClick:o[6]||(o[6]=(...t)=>r.changeName&&r.changeName(...t)),class:"btn black-btn"}," \u4FEE\u6539 "),s("div",{onClick:o[7]||(o[7]=t=>i.pop4=!1),class:"btn blue-btn"}," \u8FD4\u56DE ")])])):k("",!0)]),_:1})],512),[[x,i.pop4]])]),_:1})]))])}var Ie=C(O,[["render",me],["__scopeId","data-v-00c8ec88"]]);export{Ie as default};
