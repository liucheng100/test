import{_ as w,E as r,z as C,o as p,c as u,d as i,n as k,f as g,B as y,F as N,e as O,a,C as F,u as I,l as B,t as b,p as x,i as W}from"./index.b6fd4dc1.js";import{E as V}from"./el-input.62d293a6.js";/* empty css                   */import{u as G,c as v}from"./file.abfe09ac.js";import{n as E}from"./work.7d305944.js";import{c as T}from"./contest.14823739.js";import"./index.dcc0ffaa.js";const S={name:"submit",emits:[],props:{},inject:["globalData"],data(){return{source:"",xheight:"",loading:!1,artIntro:"",artName:"",ON:!1,formdata:{workTitle:"",description:"",workFile:0,contestGroup:1,contestId:-1},group_cache:0,pop1:!1,pop2:!1,pop3:!1,pop4:!1,pop5:!1,net_event_id:0}},computed:{contestgroup(){return this.formdata.contestGroup}},watch:{},methods:{TabClick(o){(o==3||this.contestgroup==3)&&(o!=3||this.contestgroup!=3)&&this.formdata.workFile?(this.pop5=!0,this.group_cache=o):this.loading?r.info("\u4E0A\u4F20\u6587\u4EF6\u4E2D"):this.formdata.contestGroup=o},trashFn(){this.formdata.workFile?this.pop3=!0:this.removeWork()},removeWork(){this.pop3=!1,this.source=this.xheight=this.formdata.workFile="",this.loading=!1,this.net_event_id++},upload(){if(this.loading){r.info("\u6587\u4EF6\u4E0A\u4F20\u4E2D");return}if(this.formdata.workFile){this.pop4=!0;return}this.save_the_event_id++;let o=document.createElement("input");o.setAttribute("type","file"),this.formdata.contestGroup==3?o.setAttribute("accept","video/*"):o.setAttribute("accept","image/*"),o.click(),o.onchange=e=>{let _=this.net_event_id,c=e.target.files[0];c=new window.File([c],c.name.slice(0,9),{type:c.type});let t=new FormData;t.append("file",c);let l=window.URL.createObjectURL(c);this.source=l,this.loading=!0,G(t).then(n=>{if(_==this.net_event_id)if(console.log(n),n.code)r.error("\u4E0A\u4F20\u5931\u8D25\u8BF7\u91CD\u8BD5");else if(r.success("\u4E0A\u4F20\u6210\u529F"),this.contestgroup!=3){let h=this.$refs.sourceImg.naturalHeight,d=this.$refs.sourceImg.naturalWidth,s=h/d,f=this.$refs.sourceImg.offsetWidth;this.xheight=s*f,this.formdata.workFile=n.data,this.source=v(n.data),this.loading=!1}else this.formdata.workFile=n.data,this.source=v(n.data),this.loading=!1}).catch(n=>{r.error("\u4E0A\u4F20\u5931\u8D25\u8BF7\u91CD\u8BD5"+n)})}},submit(){if(this.formdata.contestId==-1){r.warning("\u65E0\u6CD5\u6355\u83B7\u8D5B\u4E8Bid,\u8BF7\u5237\u65B0");return}if(!this.formdata.workTitle){r.warning("\u4F5C\u54C1\u540D\u4E0D\u80FD\u4E3A\u7A7A");return}if(!this.formdata.description){r.warning("\u4F5C\u54C1\u8BE6\u60C5\u4E0D\u80FD\u4E3A\u7A7A");return}if(!this.formdata.workFile){r.warning("\u8BF7\u5148\u4E0A\u4F20\u4F5C\u54C1\u6587\u4EF6");return}if(!this.ON){r.warning("\u8BF7\u52FE\u9009\u9690\u79C1\u653F\u7B56");return}E(this.formdata).then(o=>{console.log(o),o.code?(r.error(o.description+o.msg),this.pop2=!0):(r.success("\u53D1\u5E03\u6210\u529F"),this.pop1=!0)}).catch(o=>{r.error("\u51FA\u9519\u4E86"),this.pop2=!0})}},created(){C()||this.$router.push("/PC/homepage")},mounted(){T().then(o=>{o.code?r.error(o.msg):this.formdata.contestId=o.data.contestId})}},m=o=>(x("data-v-27b7bb69"),o=o(),W(),o),z={class:"submit"},A={class:"left-side"},D=m(()=>i("div",{class:"title"},"\u6295\u7A3F",-1)),L={class:"dad-upload"},R=m(()=>i("div",{class:"info"},[i("div",{class:"icon"}),i("div",{class:"t1"},"\u4E0A\u4F20\u6587\u4EF6"),i("div",{class:"t2"},b(`\u8BF7\u4FDD\u7559 EXIF \u4FE1\u606F

\u8BF7\u786E\u8BA4\u60A8\u4E0A\u4F20\u7684\u4F5C\u54C1\u7684\u8457\u4F5C\u6743\u4E3A\u672C\u4EBA\u6240\u6709\uFF0C
\u7981\u6B62\u4E0A\u4F20\u4ED6\u4EBA\u4F5C\u54C1\u3002
\u5982\u6709\u4FB5\u6743\u884C\u4E3A\uFF0C\u60A8\u5C06\u627F\u62C5\u76F8\u5E94\u7684\u6CD5\u5F8B\u8D23\u4EFB\u3002`))],-1)),U={key:0,class:"overCover"},P=["src"],j=["src"],H={key:2,class:"mask-1"},M=m(()=>i("div",{class:"loading-icon"},null,-1)),X=m(()=>i("div",{class:"loading-icon load-double"},null,-1)),q=[M,X],J={class:"right-side"},K={class:"tab-bar"},Q={class:"tab-block-1"},Y=["onClick"],Z={class:"tab tab-0"},$=m(()=>i("p",{class:"art-name"},"\u4F5C\u54C1\u9898\u76EE",-1)),ee=m(()=>i("p",{class:"art-name"},"\u4F5C\u54C1\u4ECB\u7ECD",-1)),te={class:"dad-btn"};function oe(o,e,_,c,t,l){const n=V,h=F,d=I;return p(),u("div",z,[i("div",A,[D,i("div",L,[i("div",{onClick:e[2]||(e[2]=(...s)=>l.upload&&l.upload(...s)),class:"upload",style:k({height:t.xheight?t.xheight+"px":""})},[R,t.source?(p(),u("div",U,[l.contestgroup==3?(p(),u("video",{key:0,controls:!1,muted:"",class:"source-img",src:t.source,alt:""},null,8,P)):(p(),u("img",{key:1,ref:"sourceImg",class:"source-img",src:t.source,alt:""},null,8,j)),t.loading?(p(),u("div",H,q)):g("",!0),i("div",{onClick:e[1]||(e[1]=y(()=>{},["stop"])),class:"tool-box"},[i("div",{onClick:e[0]||(e[0]=(...s)=>l.trashFn&&l.trashFn(...s)),class:"trash"})])])):g("",!0)],4)])]),i("div",J,[i("div",K,[i("div",Q,[(p(),u(N,null,O(["\u5355\u53CD\u7EC4","\u968F\u624B\u62CD\u7EC4","\u77ED\u89C6\u9891\u7EC4","AI \u7EC4"],(s,f)=>i("div",{onClick:se=>l.TabClick(f+1),class:B({"tab-item":1,"tab-item-active":l.contestgroup==f+1}),key:f},b(s),11,Y)),64))]),i("div",{class:"desc",style:k({left:(l.contestgroup-1)*(100/4)+"%",marginLeft:`calc(50%/${4})`})},null,4)]),i("div",Z,[$,a(n,{modelValue:t.formdata.workTitle,"onUpdate:modelValue":e[3]||(e[3]=s=>t.formdata.workTitle=s),placeholder:"\u8F93\u5165\u4F5C\u54C1\u9898\u76EE...",class:"art-name-input"},null,8,["modelValue"]),ee,a(n,{type:"textarea",maxlength:"300",autosize:{minRows:4,maxRows:20},resize:"none",modelValue:t.formdata.description,"onUpdate:modelValue":e[4]||(e[4]=s=>t.formdata.description=s),rows:5,placeholder:"\u8F93\u5165\u4F5C\u54C1\u4ECB\u7ECD...",class:"art-name-textarea"},null,8,["modelValue"])]),i("div",te,[a(h,{ON:t.ON,onCheck:e[5]||(e[5]=s=>t.ON=!t.ON),class:"proto-pc"},null,8,["ON"]),i("div",{class:"sub-btn",onClick:e[6]||(e[6]=(...s)=>l.submit&&l.submit(...s))}," \u63D0\u4EA4 ")])]),a(d,{ON:t.pop1,model:1,title:"\u7A3F\u4EF6\u5DF2\u63D0\u4EA4",tip:"\u7A0D\u540E\u8BF7\u5728\u4E2A\u4EBA\u4E2D\u5FC3\u67E5\u770B",options:{black:"",grey:"",blue:"\u5B8C\u6210"},onBlackClick:s=>0,onBlueClick:e[7]||(e[7]=s=>{o.$router.back(),t.pop1=!1})},null,8,["ON"]),a(d,{ON:t.pop2,model:0,title:"\u63D0\u4EA4\u4E0D\u6210\u529F",tip:"\u8BF7\u68C0\u67E5\u7F51\u7EDC\u6216\u8054\u7CFB\u7BA1\u7406\u5458",options:{black:"",grey:"",blue:"\u8FD4\u56DE"},onBlackClick:s=>0,onBlueClick:e[8]||(e[8]=s=>t.pop2=!1)},null,8,["ON"]),a(d,{ON:t.pop3,model:0,title:"\u786E\u8BA4\u8981\u5220\u9664\u4F5C\u54C1\u5417",tip:"\u8BE5\u64CD\u4F5C\u65E0\u6CD5\u88AB\u64A4\u9500\u3002",options:{black:"\u5220\u9664",grey:"",blue:"\u53D6\u6D88"},onGreyClick:s=>0,onBlueClick:e[9]||(e[9]=s=>t.pop3=!1),onBlackClick:l.removeWork},null,8,["ON","onBlackClick"]),a(d,{ON:t.pop4,model:0,title:"\u786E\u8BA4\u8981\u66F4\u6362\u4F5C\u54C1\u5417",tip:"\u8BE5\u64CD\u4F5C\u65E0\u6CD5\u88AB\u64A4\u9500\u3002",options:{black:"\u66F4\u6362",grey:"",blue:"\u53D6\u6D88"},onGreyClick:s=>0,onBlueClick:e[10]||(e[10]=s=>t.pop4=!1),onBlackClick:e[11]||(e[11]=s=>{t.pop4=!1,l.removeWork(),l.upload()})},null,8,["ON"]),a(d,{ON:t.pop5,model:0,title:"\u66F4\u6362\u7C7B\u522B\u5C06\u6E05\u7A7A\u6587\u4EF6",tip:"\u8BE5\u64CD\u4F5C\u65E0\u6CD5\u88AB\u64A4\u9500\u3002",options:{black:"\u786E\u8BA4",grey:"",blue:"\u53D6\u6D88"},onGreyClick:s=>0,onBlueClick:e[12]||(e[12]=s=>t.pop5=!1),onBlackClick:e[13]||(e[13]=s=>{t.pop5=!1,l.removeWork(),t.formdata.contestGroup=t.group_cache})},null,8,["ON"])])}var pe=w(S,[["render",oe],["__scopeId","data-v-27b7bb69"]]);export{pe as default};
