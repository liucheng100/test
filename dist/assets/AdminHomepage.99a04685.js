import{_ as k,E as p,m as P,o as B,c as E,d as i,t as _,a,w as r,l as S,q as N,s as T,u as C}from"./index.b6fd4dc1.js";import{_ as d,a as m,b as u}from"./Page1.6dd28547.js";/* empty css                   */import{g as D}from"./file.abfe09ac.js";import{c as z}from"./contest.14823739.js";import{i as O}from"./common.eb3c7a8c.js";import"./work.7d305944.js";import"./index.dcc0ffaa.js";const I={name:"homepage",components:[d,m,u],inject:["globalData"],data(){return{testList:[],ON:!1,seasonState:0,byEnd:!1,catchTop:0,isSafari:!0,contest:{}}},computed:{restday(){let s=this.contest.stopTime,t=new Date(s),o=new Date,l=t-o,e=1e3*60*60*24;return Math.ceil(l/e)}},methods:{click1(){this.ON=!this.ON},click2(){console.log(9)},scroll(s){let t=s.target.scrollTop;this.catchTop=t;let o=s.target.offsetHeight;s.target.scrollHeight-o-t<140?this.byEnd=!0:this.byEnd=!1},replaceBlob(s,t){t.forEach(o=>{D(s[o]).then(l=>{s[o]=l}).catch(l=>{p.error("\u56FE\u7247\u52A0\u8F7D\u5931\u8D25")}),s[o]=P("loading.gif")})}},mounted(){this.isSafari=O(),z().then(s=>{console.log(118,s),s.code?p.error(s.msg):(this.contest=s.data,console.log(this.contest),this.replaceBlob(this.contest,["bannerPic","introductionPic","tailPic"]),this.contest.prizes[1].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.contest.prizes[2].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.contest.prizes[3].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.contest.prizes[4].forEach(t=>{this.replaceBlob(t,["goodPic"])}),this.globalData.contestId=this.contest.contestId,this.globalData.prizes=this.contest.prizes)})},activated(){this.$refs.homepage.scrollTop=this.catchTop}},w={class:"info"},x={class:"info-left"},M={class:"info-title"},H={class:"info-tip"},L={class:"tab-0"},q={class:"tab-1"},A={class:"tab-2"};function V(s,t,o,l,e,c){const g=N,h=d,f=m,b=u,v=T,y=C;return B(),E("div",{id:"homepage",ref:"homepage",class:"homepage",onScroll:t[6]||(t[6]=(...n)=>c.scroll&&c.scroll(...n))},[i("div",w,[i("div",x,[i("div",M,_(e.contest.title),1),i("div",H,_(e.contest.subtitle),1)]),a(g,{onClick:t[0]||(t[0]=n=>e.contest.status==2?e.ON=!0:0),state:e.contest.status-1||0},null,8,["state"])]),a(v,{id:11451,sticky:"0",title_list:["\u8D5B\u4E8B\u4ECB\u7ECD","\u5168\u90E8\u4F5C\u54C1","\u83B7\u5956\u4F5C\u54C1"],onTab0Click:t[1]||(t[1]=n=>e.seasonState=0),activeIdx:1,onTab1Click:t[2]||(t[2]=n=>e.seasonState=1),onTab2Click:t[3]||(t[3]=n=>e.seasonState=2)},{tab0:r(()=>[i("div",L,[a(h,{contest:e.contest},null,8,["contest"])])]),tab1:r(()=>[i("div",q,[a(f,{loadMore:e.byEnd},null,8,["loadMore"])])]),tab2:r(()=>[i("div",A,[a(b)])]),_:1}),a(y,{ON:e.ON,model:0,title:"\u6211\u4EEC\u66F4\u63A8\u8350\u5728PC\u7AEF\u6295\u7A3F\u4F5C\u54C1",tip:"\u4EE5\u907F\u514D\u5728\u624B\u673A\u4E0A\u627E\u4E0D\u5230\u6587\u4EF6\u3002",options:{black:"",grey:"\u575A\u6301\u6295\u7A3F",blue:"\u597D\u7684"},onBlackClick:n=>0,onGreyClick:t[4]||(t[4]=n=>{s.$router.push({path:"/submit",query:{contestId:c.globalData.contestId}}),e.ON=!1}),onBlueClick:t[5]||(t[5]=n=>e.ON=!1)},null,8,["ON"]),i("div",{class:S(e.isSafari?"footer":"")},null,2)],544)}var X=k(I,[["render",V],["__scopeId","data-v-29a9a246"]]);export{X as default};
